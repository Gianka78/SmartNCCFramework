<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no	initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

    <title>Smart NCC mobile APP by GD-Soft s.r.l.</title>

    <script src="cordova.js"></script>
    <script src="libs/evothings/evothings.js"></script>
    <script src="libs/evothings/ui/ui.js"></script>
    <script src="libs/evothings/easyble/easyble.js"></script>
    <script src="libs/jquery/jquery.js"></script>
    <style type="text/css">
        div.app_loading_spalsh {
            background-color: #F3F3F3;
            border: 1px solid #ADE0F9;
            font-family: Verdana, Geneva, sans-serif;
            text-align: center;
            line-height: 25px;
            margin-top: 50px;
            width: 80%;
            margin-left: 5%;
            padding-top: 10%;
            padding-bottom: 10%;
            padding-left: 5%;
            padding-right: 5%;
        }
    </style>
</head>

<body>
    <script>
        var isCordova = true;
        function loadjscssfile(filename, filetype) {
            if (filetype == "js") {
                var fileref = document.createElement('script')
                fileref.setAttribute("type", "text/javascript")
                fileref.setAttribute("src", filename)
            }
            else if (filetype == "css") {
                var fileref = document.createElement("link")
                fileref.setAttribute("rel", "stylesheet")
                fileref.setAttribute("type", "text/css")
                fileref.setAttribute("href", filename)
            }
            if (typeof fileref != "undefined")
                document.getElementsByTagName("head")[0].appendChild(fileref)
        }
        var rnd = Date.now();
        var host_prefix = "auto_host_byid";
        var framework_version = "Build 12.001 27-01-2017";
        console.log("framework_version" + framework_version);
        var remote_folder_url = "http://" + host_prefix + ".smartncc.it/repositorysmartticket_nccolAPP/SmartTicketMobile/";
        var import_script = remote_folder_url + "app_content_incl.js?rnd=" + rnd;
        //loadjscssfile(import_script, "js");
        //loadjscssfile("http://" + host_prefix + ".smartncc.it/repositorysmartticket_nccolAPP/SmartTicketMobile/tmp.js?rnd=" + rnd, "js");
        workoffline = false;
        $.ajax({
            url: import_script,
            dataType: "text",
            success: function (data) {
                loadjscssfile(import_script, "js");
            },
            error: function () {
                document.addEventListener('deviceready', function () {
                    window.resolveLocalFileSystemURL(cordova.file.dataDirectory, function (dirEntry) {
                        startURL = dirEntry.toURL() + "install_log.txt";
                        $.get(startURL, function (data) {
                            workoffline = true;
                            loadjscssfile(dirEntry.toURL() + "app_content_incl.js", "js");
                        })
                        .fail(function () {
                            alert("Questa applicazione richiede una connessione a internet. Chiudere e riaprire.");
                        });
                    });
                });
            }
        });
    </script>
    <div class="app_loading_spalsh">
        Caricamento dell'applicazione in corso...<br />
        Se questa schermata viene visualizzata troppo a lungo potrebbe esserci un problema con la tua connessione internet.<br />
        <input type="button" value="Clicca qui per riprovare" onclick="alert('la pagina verrÃ  reimpostata');window.location.reload()" /><br /><br />

        Application loading takes too long... <br />
        <input type="button" value="Click heare to try again" onclick="window.location.reload()" />
    </div>

    <div id="ncc_app_body"></div>

    <div id="ncc_app_footer">
        SmartNCC Mobile app By GD-Soft s.r.l. - condizioni d'uso - privacy - cookie - <span id='cambia_vettore'>cambia vettore</span>
    </div>

    <div id="dialog_div" class="dialog_div">
        <div id="dialog_frame" class="dialog_frame">
            <img id="dialog_img" src="" />
            <span id="dialog_txt"></span>
            <span id="yes_btn"></span>
            <span id="no_btn"></span>
        </div>
    </div>
</body>
</html>
