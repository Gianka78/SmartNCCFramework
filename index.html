<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no	initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

    <title>Smart NCC mobile APP by GD-Soft s.r.l.</title>

    <script src="cordova.js"></script>
    <script src="libs/evothings/evothings.js"></script>
    <script src="libs/evothings/ui/ui.js"></script>
    <script src="libs/evothings/easyble/easyble.js"></script>
    <script src="libs/jquery/jquery.js"></script>
    <script type="text/javascript" src="libs/popper.min.js"></script>
    <link rel="stylesheet" href="libs/bootstrap/css/bootstrap.min.css"/>
    <script src="libs/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="libs/fontawesome/css/all.css"/>
</head>

<body>
    <script>
        var isCordova = true;
        function loadjscssfile(filename, filetype) {
            if (filetype == "js") {
                var fileref = document.createElement('script')
                fileref.setAttribute("type", "text/javascript")
                fileref.setAttribute("src", filename)
            }
            else if (filetype == "css") {
                var fileref = document.createElement("link")
                fileref.setAttribute("rel", "stylesheet")
                fileref.setAttribute("type", "text/css")
                fileref.setAttribute("href", filename)
            }
            if (typeof fileref != "undefined")
                document.getElementsByTagName("head")[0].appendChild(fileref)
        }
        var rnd = Date.now();
        
        //var host_prefix = "demo2010";
        var host_prefix = "auto-host-byid";
        var codice_vettore_default = "DEMO-SNCC";
        
        var framework_version = "Build 13.026 15-12-2020";
        //var application_type = "nccmobile_custom_V2";
        var application_type = "nccmobile";
        console.log("framework_version" + framework_version);
        var remote_folder_url = "https://" + host_prefix + ".smartncc.it/repository_gdsoft_app_framework_V2/";
        var import_script = remote_folder_url + "main_wrapper_include.js?rnd=" + rnd;
        //loadjscssfile(import_script, "js");
        //loadjscssfile("http://" + host_prefix + ".smartncc.it/repository_gdsoft_app_framework/tmp.js?rnd=" + rnd, "js");
        workoffline = false;

        if (!isCordova) {
            loadjscssfile(import_script, "js");
        } else
        document.addEventListener('deviceready', function () {
            if (typeof cordova.file == "undefined"){
                loadjscssfile(import_script, "js");
            } else
            window.resolveLocalFileSystemURL(cordova.file.dataDirectory, function (dirEntry) {
                $.ajax({
                    url: import_script,
                    dataType: "text",
                    success: function (data) {
                        //alert("gotStartScript:"+data);
                        localStorage.setItem("curr_frameworkboot_jscode", data);
                        //alert("LounchingStartScript");
                        eval(data);
                        //loadjscssfile(import_script, "js");
                    },
                    error: function () {
                        //alert("error_loading_remote:"+typeof dirEntry);
                        curr_frameworkboot_jscode = localStorage.getItem("curr_frameworkboot_jscode");
                        if (curr_frameworkboot_jscode != null){
                            //alert("foundLocalStorage:"+curr_frameworkboot_jscode);
                            workoffline = true;
                            eval(curr_frameworkboot_jscode);
                        } else {
                            //alert("emptyStartScript");
                            $("#ncc_app_body").html("Questa applicazione richiede una connessione a internet...</br><input type=\"button\" value=\"Clicca qui per riprovare\" onclick=\"alert('la pagina verrÃ  reimpostata');window.location.reload()\" />");
                        }
                    },
                    timeout: 5000
                });
            });
        });


    </script>

    <div class="app_loading_spalsh"></div>

    <div id="ncc_app_header"></div>
    <div id="ncc_app_body"></div>
    <div id="ncc_app_menu"></div>
    <div id="ncc_app_footer"></div>

    <div id="dialog_div" class="dialog_div">
        <div id="dialog_frame" class="dialog_frame">
            <img id="dialog_img" src="" />
            <span id="dialog_txt"></span>
            <span id="yes_btn"></span>
            <span id="no_btn"></span>
        </div>
    </div>
</body>
</html>
